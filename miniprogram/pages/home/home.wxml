<!-- é¥°å“æ•°æ®é¦–é¡µ -->
<view class="home-page">
  <!-- å¹³å°é€‰æ‹©å¡ç‰‡ -->
  <view class="platform-card">
    <view class="platform-item">
      <text class="platform-label">ä¹°å…¥å¹³å°</text>
      <picker mode="selector" range="{{platforms}}" bindchange="onSourceChange" value="{{sourceIndex}}">
        <view class="platform-box">{{platforms[sourceIndex]}}</view>
      </picker>
    </view>
    <view class="arrow-wrapper">
      <text class="arrow">â†’</text>
    </view>
    <view class="platform-item">
      <text class="platform-label">å–å‡ºå¹³å°</text>
      <picker mode="selector" range="{{platforms}}" bindchange="onTargetChange" value="{{targetIndex}}">
        <view class="platform-box">{{platforms[targetIndex]}}</view>
      </picker>
    </view>
  </view>

  <!-- ç±»åˆ«å’Œæ’åºç­›é€‰å¡ç‰‡ -->
  <view class="filter-card">
    <picker mode="selector" range="{{categoryOptions}}" bindchange="onCategoryChange" value="{{categoryIndex}}">
      <view class="filter-item">
        <text class="filter-label">ç±»åˆ«</text>
        <view class="filter-value">{{categoryOptions[categoryIndex]}}</view>
      </view>
    </picker>
    <picker mode="selector" range="{{sortOptions}}" bindchange="onSortChange" value="{{sortIndex}}">
      <view class="filter-item">
        <text class="filter-label">æ’åº</text>
        <view class="filter-value">{{sortOptions[sortIndex]}}</view>
      </view>
    </picker>
  </view>

  <!-- é¥°å“åˆ—è¡¨ -->
  <view class="skin-list">
    <view class="skin-item" wx:for="{{skinList}}" wx:key="id">
      <image class="skin-img" src="{{item.image_url}}" mode="aspectFit"></image>
      <view class="skin-info">
        <text class="skin-name">{{item.name}}</text>
        <view class="price-row">
          <text class="price source">Â¥{{item.source_price}}</text>
          <text class="price-arrow">â†’</text>
          <text class="price target">Â¥{{item.target_price}}</text>
        </view>
        <view class="profit-row">
          <text class="diff">+Â¥{{item.price_diff}}</text>
          <text class="rate {{getProfitClass(item.profit_rate)}}">{{item.profit_rate}}%</text>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty" wx:if="{{!loading && skinList.length === 0}}">
      <text class="empty-icon">ğŸ“¦</text>
      <text class="empty-text">æš‚æ— æ•°æ®</text>
    </view>
  </view>

  <!-- åŠ è½½æ›´å¤š -->
  <view class="load-more" wx:if="{{hasMore}}" bindtap="loadMore">
    <text>{{loading ? 'åŠ è½½ä¸­...' : 'åŠ è½½æ›´å¤š'}}</text>
  </view>
</view>
