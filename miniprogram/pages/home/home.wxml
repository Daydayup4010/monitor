<!-- 饰品数据首页 -->
<view class="home-page">
  <!-- 平台选择卡片 -->
  <view class="platform-card">
    <view class="platform-item">
      <text class="platform-label">买入平台</text>
      <picker mode="selector" range="{{platforms}}" bindchange="onSourceChange" value="{{sourceIndex}}">
        <view class="platform-box">{{platforms[sourceIndex]}}</view>
      </picker>
    </view>
    <view class="arrow-wrapper">
      <text class="arrow">→</text>
    </view>
    <view class="platform-item">
      <text class="platform-label">卖出平台</text>
      <picker mode="selector" range="{{platforms}}" bindchange="onTargetChange" value="{{targetIndex}}">
        <view class="platform-box">{{platforms[targetIndex]}}</view>
      </picker>
    </view>
  </view>

  <!-- 类别和排序筛选卡片 -->
  <view class="filter-card">
    <picker mode="selector" range="{{categoryOptions}}" bindchange="onCategoryChange" value="{{categoryIndex}}">
      <view class="filter-item">
        <text class="filter-label">类别</text>
        <view class="filter-value">{{categoryOptions[categoryIndex]}}</view>
      </view>
    </picker>
    <picker mode="selector" range="{{sortOptions}}" bindchange="onSortChange" value="{{sortIndex}}">
      <view class="filter-item">
        <text class="filter-label">排序</text>
        <view class="filter-value">{{sortOptions[sortIndex]}}</view>
      </view>
    </picker>
  </view>

  <!-- 饰品列表 -->
  <view class="skin-list">
    <view class="skin-item" wx:for="{{skinList}}" wx:key="id">
      <image class="skin-img" src="{{item.image_url}}" mode="aspectFit"></image>
      <view class="skin-info">
        <text class="skin-name">{{item.name}}</text>
        <view class="price-row">
          <text class="price source">¥{{item.source_price}}</text>
          <text class="price-arrow">→</text>
          <text class="price target">¥{{item.target_price}}</text>
        </view>
        <view class="profit-row">
          <text class="diff">+¥{{item.price_diff}}</text>
          <text class="rate {{getProfitClass(item.profit_rate)}}">{{item.profit_rate}}%</text>
        </view>
      </view>
    </view>

    <!-- 空状态 -->
    <view class="empty" wx:if="{{!loading && skinList.length === 0}}">
      <text class="empty-icon">📦</text>
      <text class="empty-text">暂无数据</text>
    </view>
  </view>

  <!-- 加载更多 -->
  <view class="load-more" wx:if="{{hasMore}}" bindtap="loadMore">
    <text>{{loading ? '加载中...' : '加载更多'}}</text>
  </view>
</view>
