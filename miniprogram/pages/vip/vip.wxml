<!-- VIP开通页面 -->
<view class="vip-page">
  <!-- 用户VIP状态 -->
  <view class="vip-status-card">
    <view class="vip-icon">👑</view>
    <view class="vip-info">
      <text class="vip-title" wx:if="{{userInfo && userInfo.role === 2}}">VIP会员</text>
      <text class="vip-title" wx:else>普通用户</text>
      <text class="vip-expiry" wx:if="{{userInfo && userInfo.vip_expiry}}">
        到期时间：{{userInfo.vip_expiry}}
      </text>
      <text class="vip-expiry" wx:else>开通VIP享受更多特权</text>
    </view>
  </view>

  <!-- VIP特权说明 -->
  <view class="privileges-card">
    <view class="card-title">VIP特权</view>
    <view class="privileges-list">
      <view class="privilege-item">
        <text class="privilege-icon">📊</text>
        <text class="privilege-text">查看全部饰品数据</text>
      </view>
      <view class="privilege-item">
        <text class="privilege-icon">🔍</text>
        <text class="privilege-text">高级筛选功能</text>
      </view>
      <view class="privilege-item">
        <text class="privilege-icon">📈</text>
        <text class="privilege-text">价格走势分析</text>
      </view>
      <view class="privilege-item">
        <text class="privilege-icon">🔔</text>
        <text class="privilege-text">价格变动提醒</text>
      </view>
    </view>
  </view>

  <!-- 套餐选择 -->
  <view class="plans-card">
    <view class="card-title">选择套餐</view>
    <view class="plans-list" wx:if="{{!loading && plans.length > 0}}">
      <view 
        class="plan-item {{selectedPlan && selectedPlan.months === item.months ? 'selected' : ''}}"
        wx:for="{{plans}}"
        wx:key="months"
        data-months="{{item.months}}"
        bindtap="selectPlan"
      >
        <view class="plan-badge" wx:if="{{item.savings > 0}}">省{{item.savings}}%</view>
        <view class="plan-title">{{item.title}}</view>
        <view class="plan-price">
          <text class="price-symbol">¥</text>
          <text class="price-value">{{item.price}}</text>
        </view>
        <view class="plan-unit">¥{{item.pricePerMonth}}/月</view>
        <view class="plan-check" wx:if="{{selectedPlan && selectedPlan.months === item.months}}">✓</view>
      </view>
    </view>
    <view class="loading-plans" wx:if="{{loading}}">
      <text>加载中...</text>
    </view>
  </view>

  <!-- 支付按钮 -->
  <view class="pay-section">
    <view class="pay-amount" wx:if="{{selectedPlan}}">
      <text class="pay-label">应付金额：</text>
      <text class="pay-price">¥{{selectedPlan.price}}</text>
    </view>
    <button 
      class="pay-btn" 
      bindtap="handlePay"
      disabled="{{paying || !selectedPlan}}"
    >
      {{paying ? '支付中...' : '立即开通'}}
    </button>
  </view>

  <!-- 底部说明 -->
  <view class="footer-tips">
    <text class="tip-text">• 开通后立即生效，VIP时长可累加</text>
    <text class="tip-text">• 如有问题请联系客服</text>
  </view>
</view>
