<!-- ч╗СхоЪщВочо▒щб╡щЭв -->
<view class="bind-page">
  <view class="bind-card">
    <!-- цнещкдцМЗчд║хЩи -->
    <view class="steps" wx:if="{{!emailExists}}">
      <view class="step {{step >= 1 ? 'active' : ''}}">
        <view class="step-num">1</view>
        <text class="step-text">щкМшпБщВочо▒</text>
      </view>
      <view class="step-line {{step >= 2 ? 'active' : ''}}"></view>
      <view class="step {{step >= 2 ? 'active' : ''}}">
        <view class="step-num">2</view>
        <text class="step-text">шо╛ч╜охпЖчаБ</text>
      </view>
    </view>

    <!-- чммф╕Ацнея╝ЪщкМшпБщВочо▒ -->
    <view class="form" wx:if="{{step === 1}}">
      <view class="card-header">
        <text class="title">ч╗СхоЪщВочо▒</text>
        <text class="subtitle">ч╗СхоЪхРОхПпхЬиWebчлпчЩ╗х╜ХцЯечЬЛцЫ┤хдЪцХ░цНо</text>
      </view>

      <view class="form-item">
        <text class="label">щВочо▒хЬ░хЭА</text>
        <view class="input-wrapper">
          <input 
            class="input" 
            type="text" 
            placeholder="шп╖ш╛УхЕещВочо▒хЬ░хЭА"
            placeholder-style="color: #bfbfbf;"
            value="{{email}}"
            bindinput="onEmailInput"
          />
        </view>
      </view>

      <view class="form-item">
        <text class="label">щВочо▒щкМшпБчаБ</text>
        <view class="code-row">
          <view class="input-wrapper code-input">
            <input 
              class="input" 
              type="text" 
              placeholder="шп╖ш╛УхЕещкМшпБчаБ"
              placeholder-style="color: #bfbfbf;"
              value="{{code}}"
              bindinput="onCodeInput"
              maxlength="6"
            />
          </view>
          <button 
            class="btn-code" 
            bindtap="sendCode"
            disabled="{{countdown > 0 || sending}}"
          >
            {{countdown > 0 ? countdown + 'sхРОщЗНшпХ' : 'хПСщАБщкМшпБчаБ'}}
          </button>
        </view>
      </view>

      <!-- щВочо▒х╖▓хнШхЬицПРчд║ -->
      <view class="merge-tip" wx:if="{{emailExists}}">
        <text class="merge-icon">ЁЯФЧ</text>
        <text class="merge-text">цндщВочо▒х╖▓хЬиWebчлпц│ихЖМя╝МщкМшпБхРОх░ЖшЗкхКихРИх╣╢ш┤жхП╖</text>
      </view>

      <button class="btn-submit" bindtap="handleStep1" disabled="{{submitting}}">
        {{submitting ? 'щкМшпБф╕н...' : (emailExists ? 'щкМшпБх╣╢хРИх╣╢' : 'ф╕Лф╕Ацне')}}
      </button>

      <view class="skip" bindtap="skip">
        <text>цЪВф╕Нч╗СхоЪ</text>
      </view>
    </view>

    <!-- чммф║Мцнея╝Ъшо╛ч╜охпЖчаБ -->
    <view class="form" wx:if="{{step === 2}}">
      <view class="card-header">
        <text class="title">шо╛ч╜охпЖчаБ</text>
        <text class="subtitle">шо╛ч╜очЩ╗х╜ХхпЖчаБя╝МчФиф║ОWebчлпчЩ╗х╜Х</text>
      </view>

      <view class="email-display">
        <text class="email-label">ч╗СхоЪщВочо▒</text>
        <text class="email-value">{{email}}</text>
      </view>

      <view class="form-item">
        <text class="label">шо╛ч╜охпЖчаБ</text>
        <view class="input-wrapper">
          <input 
            class="input" 
            type="password" 
            placeholder="шЗ│х░С6ф╕кхнЧчмж"
            placeholder-style="color: #bfbfbf;"
            value="{{password}}"
            bindinput="onPasswordInput"
          />
        </view>
      </view>

      <view class="form-item">
        <text class="label">чбошодхпЖчаБ</text>
        <view class="input-wrapper">
          <input 
            class="input" 
            type="password" 
            placeholder="хЖНцмбш╛УхЕехпЖчаБ"
            placeholder-style="color: #bfbfbf;"
            value="{{confirmPassword}}"
            bindinput="onConfirmPasswordInput"
          />
        </view>
      </view>

      <button class="btn-submit" bindtap="handleStep2" disabled="{{submitting}}">
        {{submitting ? 'ч╗СхоЪф╕н...' : 'хоМцИРч╗СхоЪ'}}
      </button>

      <view class="skip" bindtap="goBack">
        <text>тЖР ш┐ФхЫЮф╕Кф╕Ацне</text>
      </view>
    </view>
  </view>
</view>
